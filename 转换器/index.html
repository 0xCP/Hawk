<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>8.转换器 - Hawk doc</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "8.\u8f6c\u6362\u5668";
    var mkdocs_page_input_path = "\u8f6c\u6362\u5668.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Hawk doc</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">1.Hawk</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../快速教程/">2.快速教程</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../Hawk工程/">3.Hawk工程</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../主要组件介绍/">4.主要组件介绍</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../数据表和数据库连接/">5.数据表和数据库连接</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../网页采集器/">6.网页采集器</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../数据清洗/">7.数据清洗</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">8.转换器</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#_1">转换器</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#baidulocation">搜索位置(BaiduLocation)</a></li>
        
            <li><a class="toctree-l3" href="#ipgetiplocation">获取IP的坐标(GetIPLocation)</a></li>
        
            <li><a class="toctree-l3" href="#getroute">获取路径信息(GetRoute)</a></li>
        
            <li><a class="toctree-l3" href="#nearbysearch">检索附近(NearbySearch)</a></li>
        
            <li><a class="toctree-l3" href="#nlptf">自然语言处理(NlpTF)</a></li>
        
            <li><a class="toctree-l3" href="#transtf">语言翻译转换(TransTF)</a></li>
        
            <li><a class="toctree-l3" href="#addnewtf">添加新列(AddNewTF)</a></li>
        
            <li><a class="toctree-l3" href="#autoindextf">自增键生成(AutoIndexTF)</a></li>
        
            <li><a class="toctree-l3" href="#renametf">列名修改器(RenameTF)</a></li>
        
            <li><a class="toctree-l3" href="#deletetf">删除该列(DeleteTF)</a></li>
        
            <li><a class="toctree-l3" href="#joindbtf">数据库匹配(JoinDBTF)</a></li>
        
            <li><a class="toctree-l3" href="#repeattf">重复当前值(RepeatTF)</a></li>
        
            <li><a class="toctree-l3" href="#responsetf">获取请求响应(ResponseTF)</a></li>
        
            <li><a class="toctree-l3" href="#suppliertf">重试补数据(SupplierTF)</a></li>
        
            <li><a class="toctree-l3" href="#time2strtf">时间转字符串(Time2StrTF)</a></li>
        
            <li><a class="toctree-l3" href="#urlurltf">URL字符转义(UrlTF)</a></li>
        
            <li><a class="toctree-l3" href="#htmlhtmltf">HTML字符转义(HtmlTF)</a></li>
        
            <li><a class="toctree-l3" href="#regexsplittf">正则分割(RegexSplitTF)</a></li>
        
            <li><a class="toctree-l3" href="#mergetf">合并多列(MergeTF)</a></li>
        
            <li><a class="toctree-l3" href="#pythonpythontf">Python转换器(PythonTF)</a></li>
        
            <li><a class="toctree-l3" href="#rereplacetf">正则替换(ReReplaceTF)</a></li>
        
            <li><a class="toctree-l3" href="#regextf">正则转换器(RegexTF)</a></li>
        
            <li><a class="toctree-l3" href="#numbertf">提取数字(NumberTF)</a></li>
        
            <li><a class="toctree-l3" href="#strextracttf">字符首尾抽取(StrExtractTF)</a></li>
        
            <li><a class="toctree-l3" href="#tolisttf">启动并行(ToListTF)</a></li>
        
            <li><a class="toctree-l3" href="#trimtf">清除空白符(TrimTF)</a></li>
        
            <li><a class="toctree-l3" href="#fileexistft">路径是否存在(FileExistFT)</a></li>
        
            <li><a class="toctree-l3" href="#mergerepeattf">重复项合并(MergeRepeatTF)</a></li>
        
            <li><a class="toctree-l3" href="#dicttf">矩阵转置(DictTF)</a></li>
        
            <li><a class="toctree-l3" href="#-etltf">子任务-转换(EtlTF)</a></li>
        
            <li><a class="toctree-l3" href="#xpathxpathtf">XPath转换器(XPathTF)</a></li>
        
            <li><a class="toctree-l3" href="#xpathtf2">门类枚举(XPathTF2)</a></li>
        
            <li><a class="toctree-l3" href="#splittf">字符串分割(SplitTF)</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../常用/">9.常用</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../过滤器/">10.过滤器</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../执行器/">11.执行器</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../生成器/">12.生成器</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../子任务引擎/">13.子任务引擎</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../动态页面抓取专题/">14.动态页面抓取专题</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../命令行增量和自动化专题/">15.命令行增量和自动化专题</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../编译和扩展开发/">16.编译和扩展开发</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../常见问题/">17.常见问题</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../更新日志和作者/">18.更新日志和作者</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../设计Hawk背后的故事(2016)/">19.设计Hawk背后的故事(2016)</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../花一年时间,给爬虫Hawk再讲个故事(2018)/">20.花一年时间,给爬虫Hawk再讲个故事(2018)</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Hawk doc</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>8.转换器</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="_1">转换器</h1>
<h2 id="baidulocation">搜索位置(BaiduLocation)</h2>
<p>通过百度API获取当前地标的经纬度坐标，需要拖入代表地名的列
在Hawk 3之后的版本，需要在百度地图API中注册账户，并将token填入配置中，参考:</p>
<blockquote>
<p>http://lbsyun.baidu.com/index.php?title=webapi</p>
</blockquote>
<h3 id="region">所属地市(Region):</h3>
<ul>
<li>类型:String 默认值:北京</li>
<li>通过城市名称进行信息检索</li>
</ul>
<h3 id="tag">标签(Tag):</h3>
<ul>
<li>类型:String</li>
<li>如医院，美食等</li>
</ul>
<hr />
<h2 id="ipgetiplocation">获取IP的坐标(GetIPLocation)</h2>
<p>获取某一ip地址的经纬度坐标</p>
<hr />
<h2 id="getroute">获取路径信息(GetRoute)</h2>
<p>从当前地名，运动到对应坐标所需的时间</p>
<h3 id="dest">目标位置(Dest):</h3>
<ul>
<li>类型:String</li>
<li>通过城市名称进行信息检索</li>
</ul>
<h3 id="sourcecity">源城市(SourceCity):</h3>
<ul>
<li>类型:String 默认值:北京</li>
<li>通过城市名称进行信息检索</li>
</ul>
<h3 id="destcity">目标城市(DestCity):</h3>
<ul>
<li>类型:String 默认值:北京</li>
<li>通过城市名称进行信息检索</li>
</ul>
<h3 id="modeselector">运动方案(ModeSelector):</h3>
<ul>
<li>类型:string选项 默认值:公交</li>
<li>没有描述</li>
</ul>
<hr />
<h2 id="nearbysearch">检索附近(NearbySearch)</h2>
<p>获取当前经纬度某一半径范围内的所有地物，需要拖入的为代表经度的列</p>
<h3 id="query">查询地物，如<code>医院</code>,<code>商场等</code>(Query):</h3>
<ul>
<li>类型:String</li>
<li>如公园，车站等</li>
</ul>
<h3 id="lng">纬度列(Lng):</h3>
<ul>
<li>类型:String 默认值:pos_lng</li>
<li>代表纬度所在的列</li>
</ul>
<h3 id="radius">搜索半径(Radius):</h3>
<ul>
<li>类型:Int32 默认值:2000</li>
<li>没有描述</li>
</ul>
<h3 id="allresult">所有结果(AllResult):</h3>
<ul>
<li>类型:Boolean 默认值:False</li>
<li>没有描述</li>
</ul>
<hr />
<h2 id="nlptf">自然语言处理(NlpTF)</h2>
<p>通过语言云获取的NlpTF功能，包括分词，词性标注，主题提取等</p>
<h3 id="resulttyperesulttype">ResultType(ResultType):</h3>
<ul>
<li>类型:ContentType 默认值:Text</li>
<li>没有描述</li>
</ul>
<h3 id="patternpattern">Pattern(Pattern):</h3>
<ul>
<li>类型:Pattern 默认值:分词</li>
<li>没有描述</li>
</ul>
<hr />
<h2 id="transtf">语言翻译转换(TransTF)</h2>
<p>从当前语言翻译为目标语言(调用百度API)</p>
<h3 id="clientid">应用中心账号(ClientID):</h3>
<ul>
<li>类型:String</li>
<li>没有描述</li>
</ul>
<h3 id="keykey">key(Key):</h3>
<ul>
<li>类型:String</li>
<li>没有描述</li>
</ul>
<h3 id="sourcesource">Source(Source):</h3>
<ul>
<li>类型:string选项 默认值:自动检测</li>
<li>没有描述</li>
</ul>
<h3 id="targettarget">Target(Target):</h3>
<ul>
<li>类型:string选项 默认值:自动检测</li>
<li>没有描述</li>
</ul>
<hr />
<h2 id="addnewtf">添加新列(AddNewTF)</h2>
<p>为数据集添加新的列，值为某固定值</p>
<h3 id="newvalue">生成值(NewValue):</h3>
<ul>
<li>类型:String</li>
<li>没有描述</li>
</ul>
<hr />
<h2 id="autoindextf">自增键生成(AutoIndexTF)</h2>
<p>自动生成一个从起始索引开始的自增新列</p>
<h3 id="startindex">起始索引(StartIndex):</h3>
<ul>
<li>类型:Int32 默认值:0</li>
<li>没有描述</li>
</ul>
<hr />
<h2 id="renametf">列名修改器(RenameTF)</h2>
<p>对列名进行修改,常用</p>
<p>拖入的列是要修改的列，填写<code>输出列</code>后，原始列被删除，内容转移到新列上</p>
<p>除了手工拖入模块，也可直接在数据清洗列上的文本框中直接修改列名，按回撤提交，可达到同样效果。</p>
<hr />
<h2 id="deletetf">删除该列(DeleteTF)</h2>
<p>删除所在列的内容</p>
<p>删除之后，在该列的内容和所有工具就不再可见。要想修改可以在数据清洗界面左侧的模块列表里选择，修改和删除。</p>
<hr />
<h2 id="joindbtf">数据库匹配(JoinDBTF)</h2>
<p>用于完成与数据库的join操作和匹配，目前测试不完善</p>
<h3 id="ismutlidatas">查询多数据(IsMutliDatas):</h3>
<ul>
<li>类型:Boolean 默认值:False</li>
<li>启用该项时，会查询多个满足条件的项，同时将同一列保存为数组</li>
</ul>
<h3 id="searchstrategy">匹配方式(SearchStrategy):</h3>
<ul>
<li>类型:DBSearchStrategy 默认值:Contains</li>
<li>字符串匹配，如like,contains等，符合sql标准语法</li>
</ul>
<h3 id="keyname">表主键(KeyName):</h3>
<ul>
<li>类型:String</li>
<li>字符串匹配，如like,contains等，符合sql标准语法</li>
</ul>
<hr />
<h2 id="repeattf">重复当前值(RepeatTF)</h2>
<p>对当前行进行重复性生成</p>
<h3 id="repeattype">重复模式(RepeatType):</h3>
<ul>
<li>类型:RepeatType 默认值:OneRepeat</li>
<li>没有描述</li>
</ul>
<h3 id="repeatcount">重复次数(RepeatCount):</h3>
<ul>
<li>类型:String 默认值:1</li>
<li>没有描述</li>
</ul>
<hr />
<h2 id="responsetf">获取请求响应(ResponseTF)</h2>
<p>使用 网页采集器 获取网页数据，得到响应字段的值并添加到对应的属性中</p>
<h3 id="crawlerselector">爬虫选择(CrawlerSelector):</h3>
<ul>
<li>类型:可编辑选项</li>
<li>填写采集器或模块的名称</li>
</ul>
<h3 id="headerfilter">响应头(HeaderFilter):</h3>
<ul>
<li>类型:String</li>
<li>要获取的响应头的名称，多个之间用空格分割，不区分大小写</li>
</ul>
<hr />
<h2 id="suppliertf">重试补数据(SupplierTF)</h2>
<p>尝试对已有错误日志重跑补数据，错误日志需包含错误所在的任务名和模块名</p>
<h3 id="innerexecute">使用原执行器(InnerExecute):</h3>
<ul>
<li>类型:Boolean 默认值:False</li>
<li>没有描述</li>
</ul>
<hr />
<h2 id="time2strtf">时间转字符串(Time2StrTF)</h2>
<p>将时间转换为特定格式的字符串</p>
<h3 id="format">转换格式(Format):</h3>
<ul>
<li>类型:String 默认值:yyyy-MM-dd</li>
<li>没有描述</li>
</ul>
<hr />
<h2 id="urlurltf">URL字符转义(UrlTF)</h2>
<p>对超链接url生成URL编码后的字符串，用以进行远程访问</p>
<h3 id="converttype">转换选项(ConvertType):</h3>
<ul>
<li>类型:ConvertType 默认值:Decode</li>
<li>没有描述</li>
</ul>
<hr />
<h2 id="htmlhtmltf">HTML字符转义(HtmlTF)</h2>
<p>删除HTML标签和转义符号</p>
<p>当页面包含HTML时，一些字符可能已经被转义了，例如空格成了<code>nsbp%</code>。拖入到对应的列，即可将转义符号恢复为之前的表示</p>
<p>注意:</p>
<ul>
<li>Hawk的Web访问器比python更加智能，默认对带特殊符号和中文的URL进行编码，所以这个模块用的并不多。</li>
</ul>
<h3 id="converttype_1">转换选项(ConvertType):</h3>
<ul>
<li>类型:ConvertType 默认值:Decode</li>
<li>没有描述</li>
</ul>
<hr />
<h2 id="regexsplittf">正则分割(RegexSplitTF)</h2>
<p>使用正则表达式分割字符串</p>
<h3 id="fromback">倒序(FromBack):</h3>
<ul>
<li>类型:Boolean 默认值:False</li>
<li>勾选此项后，选择从后数的第n项</li>
</ul>
<h3 id="ismanydata">工作模式(IsManyData):</h3>
<ul>
<li>类型:ScriptWorkMode 默认值:One
*</li>
</ul>
<h3 id="_2">多文档</h3>
<p>生成多条数据（文档）</p>
<h3 id="_3">单文档</h3>
<p>单文档</p>
<h3 id="_4">不进行转换</h3>
<h3 id="index">匹配编号(Index):</h3>
<ul>
<li>类型:Int32 默认值:0</li>
<li>当值小于0时，可同时匹配多个值</li>
</ul>
<h3 id="script">表达式(Script):</h3>
<ul>
<li>类型:String</li>
<li>没有描述</li>
</ul>
<hr />
<h2 id="mergetf">合并多列(MergeTF)</h2>
<p>该模块可以将多个列合并成一个列</p>
<p>常见的如将page合并到url中，也可以通过文件名，合并出要保存的文件的位置，是使用次数最多的模块。</p>
<p>它的操作非常灵活，例如格式为： <code>format= {0}+{1}+{2}</code> ， 其他列为<code>B C</code>，则代表将输入列，B列和C列的内容直接拼接。</p>
<ul>
<li><code>{0}</code>：输入列,</li>
<li><code>{1}</code>：<code>其他列</code>中的第0项，<code>{1}</code>代表第1项</li>
<li><code>[a]</code>：A列中的内容</li>
<li><code>{config}</code> : 工程全局配置中键为config的值</li>
</ul>
<p>总结来说： 方括号代表从本行的其他列，大括号可从全局配置中读取内容
若全局配置或数据中不包含对应的内容，则该列自动为空</p>
<h3 id="mergewith">其他项(MergeWith):</h3>
<ul>
<li>类型:String</li>
<li>写入多个列名，中间使用空格分割，若合并输入列，则可以为空</li>
</ul>
<h3 id="format_1">格式(Format):</h3>
<ul>
<li>类型:String</li>
<li>形如'http:\{0}:{1},{2}...' - 输入列的序号为0， - 之后的1,2分别代表【其他项】的第0和第1个值</li>
</ul>
<h3 id="referformat">参考格式(ReferFormat):</h3>
<ul>
<li>类型:string选项</li>
<li>为了方便用户，下拉菜单中提供了已有 网页采集器 配置的url，可修改后使用</li>
</ul>
<hr />
<h2 id="pythonpythontf">Python转换器(PythonTF)</h2>
<p>执行特定的python代码或脚本，最后一行需要为值类型，作为该列的返回值
例如，有两列a和b, 要将它们按字符串相加:</p>
<p><code>a+b</code>
若希望按数值类型相加， 则需要提前将其转换</p>
<p><code>float(a)+float(b)</code>
也可以提前定义函数:</p>
<pre><code>def add(x,y):
return float(x)+float(y)
add(a,b)
</code></pre>

<p>也可以使用lambda:</p>
<pre><code>f= lambda a,b: a+b
f(a,b)
</code></pre>

<h3 id="_5">注意：</h3>
<ol>
<li>你可以在文本框中定义函数，但不建议太过复杂</li>
<li>很难引入第三方库，这受限于C#使用的ironpython(一个C#和Python交互的模块)的功能, Hawk3中引入了调用第三方库的功能，通过编写库路径，从而能够在脚本中import库，但功能支持并不好。</li>
<li>不论操作如何，脚本的最后一行需要是个可求值的元素，传递给对应的列，比如</li>
<li><code>return a</code> #这是错误的</li>
<li><code>a+b</code> 正确，可求值</li>
<li><code>lambda x:x+1</code>  你确定要返回一个函数或lambda?肯定也是不对的</li>
<li>Hawk并不预定义每个列具体的类型，因此需要在Python代码中对其进行类型和是否为空的判断。</li>
</ol>
<h3 id="scriptworkmode">工作模式(ScriptWorkMode):</h3>
<ul>
<li>类型:ScriptWorkMode 默认值:NoTransform
*</li>
</ul>
<h3 id="_6">多文档</h3>
<p>生成多条数据（文档）</p>
<h3 id="_7">单文档</h3>
<p>单文档</p>
<h3 id="_8">不进行转换</h3>
<h3 id="script_1">执行脚本(Script):</h3>
<ul>
<li>类型:String 默认值:value</li>
<li>没有描述</li>
</ul>
<h3 id="pythonlibrarypath">Python库路径(LibraryPath):</h3>
<ul>
<li>类型:String</li>
<li>若需要引用第三方Python库，则可指定库的路径，一行一条</li>
</ul>
<hr />
<h2 id="rereplacetf">正则替换(ReReplaceTF)</h2>
<p>通过正则表达式替换数值</p>
<h3 id="replacetext">替换为(ReplaceText):</h3>
<ul>
<li>类型:String</li>
<li>没有描述</li>
</ul>
<h3 id="ismanydata_1">工作模式(IsManyData):</h3>
<ul>
<li>类型:ScriptWorkMode 默认值:One
*</li>
</ul>
<h3 id="_9">多文档</h3>
<p>生成多条数据（文档）</p>
<h3 id="_10">单文档</h3>
<p>单文档</p>
<h3 id="_11">不进行转换</h3>
<h3 id="index_1">匹配编号(Index):</h3>
<ul>
<li>类型:Int32 默认值:0</li>
<li>当值小于0时，可同时匹配多个值</li>
</ul>
<h3 id="script_2">表达式(Script):</h3>
<ul>
<li>类型:String</li>
<li>没有描述</li>
</ul>
<hr />
<h2 id="regextf">正则转换器(RegexTF)</h2>
<p>通过正则表达式提取内容, 可匹配一个和多个内容
设置匹配编号为正数n时，它可将第n个匹配结果转换到新列上。如果不填写新列名，则内容直接覆盖原始列。
输入负数n时，则会返回倒数第n个内容。如果没有发现匹配，则返回空</p>
<h3 id="ismanydata_2">工作模式(IsManyData):</h3>
<ul>
<li>类型:ScriptWorkMode 默认值:One
*</li>
</ul>
<h3 id="_12">多文档</h3>
<p>生成多条数据（文档）</p>
<h3 id="_13">单文档</h3>
<p>单文档</p>
<h3 id="_14">不进行转换</h3>
<h3 id="index_2">匹配编号(Index):</h3>
<ul>
<li>类型:Int32 默认值:0</li>
<li>当值小于0时，可同时匹配多个值</li>
</ul>
<h3 id="script_3">表达式(Script):</h3>
<ul>
<li>类型:String</li>
<li>没有描述</li>
</ul>
<hr />
<h2 id="numbertf">提取数字(NumberTF)</h2>
<p>提取当前列中出现的数值</p>
<p>它是正则转换器的特例，它能够提取浮点或整数，也能包含正负数</p>
<h3 id="ismanydata_3">工作模式(IsManyData):</h3>
<ul>
<li>类型:ScriptWorkMode 默认值:One
*</li>
</ul>
<h3 id="_15">多文档</h3>
<p>生成多条数据（文档）</p>
<h3 id="_16">单文档</h3>
<p>单文档</p>
<h3 id="_17">不进行转换</h3>
<h3 id="index_3">匹配编号(Index):</h3>
<ul>
<li>类型:Int32 默认值:0</li>
<li>当值小于0时，可同时匹配多个值</li>
</ul>
<h3 id="script_4">表达式(Script):</h3>
<ul>
<li>类型:String 默认值:(-?\d+)(.\d+)?</li>
<li>没有描述</li>
</ul>
<hr />
<h2 id="strextracttf">字符首尾抽取(StrExtractTF)</h2>
<p>提取字符串中，从首串到尾串中间的文本内容</p>
<p>当文本为<code>CABD</code>时，需要获取B，而B非常长，写正则表达式提取有很大困难时，可以使用本模块。此时，首串填写A，尾串填写D，则Hawk就能将B提取出来。如果勾选<code>包含首尾字符</code>，则输出<code>ABD</code>，否则只有B。注意:</p>
<ul>
<li>建议A和D在文本中是唯一的，否则抽取出来的B可能并不是你想要的。</li>
<li>该工具特别适合在抽取网页的某一特定内容时使用.</li>
</ul>
<h3 id="former">首串(Former):</h3>
<ul>
<li>类型:String</li>
<li>没有描述</li>
</ul>
<h3 id="end">尾串(End):</h3>
<ul>
<li>类型:String</li>
<li>没有描述</li>
</ul>
<h3 id="havestartend">包含首尾串(HaveStartEnd):</h3>
<ul>
<li>类型:Boolean 默认值:False</li>
<li>返回的结果里是否包含首串和尾串</li>
</ul>
<hr />
<h2 id="tolisttf">启动并行(ToListTF)</h2>
<p>可设置任务并行方式和参数</p>
<p>该模块在执行时，会切分本模块前后的数据流，以前侧的数据为种子，后侧的任务为mapper执行.</p>
<p>子线程名称和子线程数量，都支持直接写值，或使用方括号表达式来获取别的列的内容。</p>
<p>例如，如果你确定每个子任务都会获取100条数据，就可以在<code>子线程数量</code>中填写<code>100</code>，之后当该任务获取了50个元素时，进度条正好处在50%的位置。如果有一列名为“小区名”， 则可以在<code>子线程名称</code>栏目中填写<code>[小区名]</code> ，Hawk就会把小区名列中的内容作为子任务的名称。</p>
<p>注意:</p>
<ol>
<li>该转换器在调试和串行执行模式不起任何作用，仅仅作为一个标志</li>
<li>它能够在并行模式下，给执行引擎一个并行分叉的标志。</li>
</ol>
<h3 id="mountcolumn">子线程数量(MountColumn):</h3>
<ul>
<li>类型:String</li>
<li>每个子线程将要获取的数量，用于显示进度条，可不填</li>
</ul>
<h3 id="groupmount">分组并行数量(GroupMount):</h3>
<ul>
<li>类型:Int32 默认值:1</li>
<li>将多个种子合并为一个任务执行，这对于小型种子任务可有效提升效率</li>
</ul>
<h3 id="displayprogress">显示独立任务(DisplayProgress):</h3>
<ul>
<li>类型:Boolean 默认值:True</li>
<li>是否将每个子线程插入到任务队列中，从而显示进度</li>
</ul>
<hr />
<h2 id="trimtf">清除空白符(TrimTF)</h2>
<p>清除字符串前后和中间的空白符
默认能去掉文本前后的空白字符，也可以通过勾选内部选项，清除文本中间的空白符
注意：</p>
<ul>
<li>使用<code>正则替换</code>也能实现类似的要求，只是本模块会更简单。</li>
</ul>
<h3 id="replaceblank">清除中间空格(ReplaceBlank):</h3>
<ul>
<li>类型:Boolean 默认值:False</li>
<li>没有描述</li>
</ul>
<h3 id="replaceinnerblank">空白符替换为空格(ReplaceInnerBlank):</h3>
<ul>
<li>类型:Boolean 默认值:True</li>
<li>没有描述</li>
</ul>
<hr />
<h2 id="fileexistft">路径是否存在(FileExistFT)</h2>
<p>判断某一个文件是否已经在指定路径上</p>
<hr />
<h2 id="mergerepeattf">重复项合并(MergeRepeatTF)</h2>
<p>对重复的数据行，进行合并操作</p>
<h3 id="islazylinq">延迟输出(IsLazyLinq):</h3>
<ul>
<li>类型:Boolean 默认值:False</li>
<li>不勾选此选项使用枚举式迭代，需保证在本模块之后没有其他操作，否则请勾选该选项</li>
</ul>
<h3 id="collectioncolumns">合并到集合的属性(CollectionColumns):</h3>
<ul>
<li>类型:String</li>
<li>填入空格分割的列名，对本模块所在列的值相同的所有属性分别进行纵向合并数组</li>
</ul>
<h3 id="sumcolumns">求和属性(SumColumns):</h3>
<ul>
<li>类型:String</li>
<li>可填入空格分割的多个列名 对本模块所在列的值相同的所有属性，分别进行按列求和</li>
</ul>
<hr />
<h2 id="dicttf">矩阵转置(DictTF)</h2>
<p>将列数据转换为行数据，拖入的列为key</p>
<hr />
<h2 id="-etltf">子任务-转换(EtlTF)</h2>
<p>调用所选的子任务作为转换器，有关子任务，请参考相关文档</p>
<h3 id="iscycle">递归到下列(IsCycle):</h3>
<ul>
<li>类型:Boolean 默认值:False</li>
<li>没有描述</li>
</ul>
<h3 id="ismanydata_4">工作模式(IsManyData):</h3>
<ul>
<li>类型:ScriptWorkMode 默认值:List
*</li>
</ul>
<h3 id="_18">多文档</h3>
<p>生成多条数据（文档）</p>
<h3 id="_19">单文档</h3>
<p>单文档</p>
<h3 id="_20">不进行转换</h3>
<h3 id="-etlselector">子任务-选择(ETLSelector):</h3>
<ul>
<li>类型:可编辑选项</li>
<li>输入或选择调用的子任务的名称</li>
</ul>
<h3 id="etlrange">调用范围(ETLRange):</h3>
<ul>
<li>类型:String</li>
<li>设定调用子任务的模块范围，例如2:30表示被调用任务的第2个到第30个子模块将会启用，其他模块忽略，2:-1表示从第2个到倒数第二个启用，符合python的slice语法，为空则默认全部调用</li>
</ul>
<h3 id="mappingset">属性映射(MappingSet):</h3>
<ul>
<li>类型:String</li>
<li>源属性:目标属性列 多个映射中间用空格分割，例如A:B C:D, 表示主任务中的A,B属性列会以C,D的名称传递到子任务中</li>
</ul>
<hr />
<h2 id="xpathxpathtf">XPath转换器(XPathTF)</h2>
<p>通过XPath或CSS选取html中的子节点文档</p>
<p>当输入的单元格内容为html文档，而又想提取其部分数据，用 网页采集器 又<code>杀鸡用牛刀</code>，则可以考虑使用它。</p>
<h3 id="xpath">XPath</h3>
<p>关于XPath语法，可参考<a href="http://www.w3school.com.cn/xpath/xpath_syntax.asp">教程</a></p>
<p>XPath可以非常灵活，例如：</p>
<ul>
<li>bookstore 选取 bookstore 元素的所有子节点。</li>
<li>/bookstore    选取根元素 bookstore。注释：假如路径起始于正斜杠( / )，则此路径始终代表到某元素的绝对路径！</li>
<li>bookstore/book    选取属于 bookstore 的子元素的所有 book 元素。</li>
<li>//book    选取所有 book 子元素，而不管它们在文档中的位置。</li>
<li>bookstore//book   选择属于 bookstore 元素的后代的所有 book 元素，而不管它们位于 bookstore 之下的什么位置。</li>
<li>//@lang   选取名为 lang 的所有属性。</li>
<li>//@src 可匹配所有src标签</li>
<li>//title[@lang] 选取所有拥有名为 lang 的属性的 title 元素
还可以通过<code>|</code>对多个表达式进行混合，Hawk支持了完整的XPath语法，因此不论是<code>网页采集器</code>以及数据清洗的<code>XPath</code>转换器，都能极其灵活地实现各种需求。</li>
</ul>
<h3 id="cssselector">CSSSelector</h3>
<p>多数情况下，使用XPath就能解决问题，但是CSSSelector更简洁，且鲁棒性更强。关于它的介绍，可<a href="http://www.w3school.com.cn/cssref/css_selectors.asp">参考教程</a>
当然，大部分情况不需要那么复杂，只要记住以下几点：</p>
<ul>
<li><code>.name</code> 获取所有id为name的元素</li>
<li><code>#name</code> 获取所有class为name的元素</li>
<li><code>p</code> 获取所有p元素</li>
<li><code>ul &gt; li</code> 获取所有父节点是ul的li元素</li>
</ul>
<h3 id="xpath_1">路径(XPath):</h3>
<ul>
<li>类型:String</li>
<li>没有描述</li>
</ul>
<h3 id="ismanydata_5">工作模式(IsManyData):</h3>
<ul>
<li>类型:ScriptWorkMode 默认值:One
*</li>
</ul>
<h3 id="_21">多文档</h3>
<p>生成多条数据（文档）</p>
<h3 id="_22">单文档</h3>
<p>单文档</p>
<h3 id="_23">不进行转换</h3>
<h3 id="gettext">获取正文(GetText):</h3>
<ul>
<li>类型:Boolean 默认值:False</li>
<li>勾选此项后，会智能提取新闻正文，XPath路径可为空</li>
</ul>
<h3 id="selectorformat">选择器(SelectorFormat):</h3>
<ul>
<li>类型:SelectorFormat 默认值:XPath
*</li>
</ul>
<h3 id="crawltype">抓取目标(CrawlType):</h3>
<ul>
<li>类型:CrawlType 默认值:InnerText
*</li>
</ul>
<hr />
<h2 id="xpathtf2">门类枚举(XPathTF2)</h2>
<p>要拖入HTML文本列,可将页面中的门类，用Cross模式组合起来，适合于爬虫无法抓取全部页面，但可以按分类抓取的情况。需调用 网页采集器 ，具体参考文档-XPathTF2</p>
<h3 id="crawlerselector_1">爬虫选择(CrawlerSelector):</h3>
<ul>
<li>类型:可编辑选项</li>
<li>填写采集器或模块的名称</li>
</ul>
<hr />
<h2 id="splittf">字符串分割(SplitTF)</h2>
<p>通过字符分割字符串</p>
<h3 id="shouldsplitchars">按字符直接分割(ShouldSplitChars):</h3>
<ul>
<li>类型:Boolean 默认值:False</li>
<li>将原文本每个字符直接分割开</li>
</ul>
<h3 id="splitpause">空格分割(SplitPause):</h3>
<ul>
<li>类型:Boolean 默认值:False</li>
<li>没有描述</li>
</ul>
<h3 id="index_4">匹配编号(Index):</h3>
<ul>
<li>类型:String 默认值:0
*</li>
<li>若想获取分割后的第0个元素，则填入0，获取倒数第一个元素，则填入-1</li>
<li>可输入多个匹配编号，中间以空格分割，</li>
<li>【输出列】也需要与之一对应</li>
</ul>
<h3 id="splitchar">分割字符(SplitChar):</h3>
<ul>
<li>类型:String</li>
<li>多个分隔符用空格分割，换行符用\t，制表符用\t</li>
</ul>
<hr />
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../常用/" class="btn btn-neutral float-right" title="9.常用">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../数据清洗/" class="btn btn-neutral" title="7.数据清洗"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../数据清洗/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../常用/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
